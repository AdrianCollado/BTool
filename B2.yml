Name: Gloss
Output:
    Binaries: Build/Binaries/%(PROJECT)/%(ARCH)/%(CONFIG)/%(MODULE).sys
    Static-Libraries: Build/Libraries/%(PROJECT)/%(ARCH)/%(CONFIG)/%(MODULE).a
    Dynamic-Libraries: Build/Libraries/%(PROJECT)/%(ARCH)/%(CONFIG)/%(MODULE).so
Options:
    FlagsCPP: -Wall -Wextra
Architectures:
    - X86-64:
        Name: X86-64
        CompileC: x86_64-elf-gcc
        CompileC++: x86_64-elf-g++
        CompileASM: x86_64-elf-gcc -x assembler-with-cpp
    - X86-32:
        Name: X86-32
        CompileC: i386-elf-gcc
        CompileC++: i386-elf-g++
        CompileASM: i386-elf-gcc -x assembler-with-cpp
    - X86-16:
        Name: X86-16
        CompileASM: x86_64-elf-gcc -x assembler-with-cpp
Configurations:
    - Debug:
        Name: Debug
        FlagsCPP: -g -DDEBUG
    - Develop:
        Name: Develop
        FlagsCPP: -g -O2 -DDEVELOP
    - Release:
        Name: Release
        FlagsCPP: -O2 -DRELEASE
Projects:
    - BootHD:
        Modules:
            - FAT32:
                Name: HDF32
                FlagsCPP: -D_FS_F32
            - FAT16:
                Name: HDF16
                FlagsCPP: -D_FS_F16
            - FAT12:
                Name: HDF12
                FlagsCPP: -D_FS_F12
            - Raw:
                Name: HDRAW
                FlagsCPP: -D_FS_NONE


  - Name: X86-32
    Tools:
      C: gcc -m32
      C++: g++ -m32
      Linker: gcc -m32


        - Name: Develop
    Flags:
      C++: -g -O2 -DDEVELOP
  - Name: Release
    Flags:
      C++: -O2 -DRELEASE

###############################################################################
# Jobs                                                                        #
###############################################################################
Jobs:
  - Name: Compile

  - Name: Build
    Iterate:
      - Set: $(Architectures)
        Value: $(Arch)
      - Set: $(Configurations)
        Value: $(Config)
      - Set: $(Projects)
        Value: $(Project)
    Tasks:
      - Command: Compile
        Arguments:
          - $()
      - Command: Link

  - Name: Clean
    Tasks:
      - Command: Remove-Objects
        Arguments:
          - Build

  - Name: Rebuild
    Dependencies:
      - Clean
      - Build

Tasks:
  - Name: Remove
    Stages:
      - Command: rm -rf $(0)
  - Name: Compile
    Stages:
      - Command: $()